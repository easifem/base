# Find HDF5
FIND_PACKAGE(HDF5 REQUIRED COMPONENTS Fortran HL)
IF(HDF5_VERSION VERSION_LESS 1.8.7)
  MESSAGE(WARNING "HDF5 VERSION SHOULD BE >= 1.8.7")
ENDIF()
IF(HDF5_FOUND)
  MESSAGE(STATUS "HDF5 FOUND: ")
  LIST( APPEND TARGET_COMPILE_DEF "-DUSE_HDF5" )
  LIST( APPEND TARGET_COMPILE_DEF "${HDF5_Fortran_DEFINITIONS}" )
  MESSAGE( STATUS "HDF5 fortran lib :: ${HDF5_Fortran_LIBRARIES}")
ELSE()
  MESSAGE( ERROR "HDF5 NOT FOUND" )
ENDIF()
TARGET_LINK_LIBRARIES(${PROJECT_NAME} PUBLIC ${HDF5_Fortran_LIBRARIES} )
TARGET_INCLUDE_DIRECTORIES(${PROJECT_NAME} PUBLIC ${HDF5_Fortran_INCLUDE_DIRS})