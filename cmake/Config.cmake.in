@PACKAGE_INIT@

list(APPEND ExternalLibs Sparsekit toml-f)

if(@USE_LAPACK95@)
  list(APPEND ExternalLibs LAPACK95)
endif()

if(@USE_ARPACK@)
  list(APPEND ExternalLibs arpackng)
endif()

if(@USE_RAYLIB@)
  list(APPEND ExternalLibs raylib)
endif()

foreach(LIB ${ExternalLibs})
  find_package(${LIB} REQUIRED)
endforeach()

if(@USE_GMSH_SDK@)
  find_library(GMSH_LIBRARIES NAMES gmsh gmsh.4.13.0 gmsh.4.13 REQUIRED)
endif()

find_package(HDF5 REQUIRED COMPONENTS Fortran HL)

if(@USE_OPENMP@)
  if(APPLE)
    if(CMAKE_C_COMPILER_ID MATCHES "Clang" OR CMAKE_C_COMPILER_ID MATCHES
                                              "AppleClang")
      set(OpenMP_C
          "${CMAKE_C_COMPILER}"
          CACHE STRING "" FORCE)
      set(OpenMP_C_FLAGS
          "-fopenmp=libomp -Wno-unused-command-line-argument"
          CACHE STRING "" FORCE)
      set(OpenMP_C_LIB_NAMES
          "libomp" "libgomp" "libiomp5"
          CACHE STRING "" FORCE)
      set(OpenMP_libomp_LIBRARY
          ${OpenMP_C_LIB_NAMES}
          CACHE STRING "" FORCE)
      set(OpenMP_libgomp_LIBRARY
          ${OpenMP_C_LIB_NAMES}
          CACHE STRING "" FORCE)
      set(OpenMP_libiomp5_LIBRARY
          ${OpenMP_C_LIB_NAMES}
          CACHE STRING "" FORCE)

      set(OpenMP_CXX
          "${CMAKE_CXX_COMPILER}"
          CACHE STRING "" FORCE)
      set(OpenMP_CXX_FLAGS
          "-fopenmp=libomp -Wno-unused-command-line-argument"
          CACHE STRING "" FORCE)

      set(OpenMP_CXX_LIB_NAMES
          "libomp" "libgomp" "libiomp5"
          CACHE STRING "" FORCE)
    endif()
  endif()

  find_package(OpenMP REQUIRED)
endif()

set_and_check("@PROJECT_NAME@_INCLUDE_DIR" "@PACKAGE_INSTALL_INCLUDEDIR@")

include("${CMAKE_CURRENT_LIST_DIR}/@TARGETS_EXPORT_NAME@.cmake")

check_required_components("@PROJECT_NAME@")
